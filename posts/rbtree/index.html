<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>RBTree | Whis&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="RedBlack_Tree 五个条件 节点非黑即红 根节点是黑色的 叶节点(NIL)是黑色的 如果一个节点是红色的，则它的两个子节点都是黑色的 从根节点出发到所有叶节点路径上，黑色节点数量相同 最短路径全黑，节点数 a，最长路径有相同多个黑色节点（条件 5）
，红色节点不能连续（条件 4），节点数 2a
调整策略 插入节点站在祖父节点看
删除调整站在父节点看
插入调整 用带有两个黑色的 NIL 的新节点替换 NIL 叶节点
为了方便调整，新结点初始为红色（黑色节点影响条件 5）
情况一 插入节点的父节点是黑色
直接插入
情况二 插入节点的父节点和叔节点都是红色
父节点、叔节点染成黑色，祖父节点染成红色
情况三 LL 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的左孩子，父节点是祖父节点的左孩子
祖父节点右旋，祖父节点染成红色，父节点染成黑色
情况四 LR 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的右孩子，父节点是祖父节点的左孩子
父节点左旋，转换为情况三（祖父节点右旋，祖父节点染成红色，父节点染成黑色）
删除调整 情况一 兄弟节点是红色
父节点左旋，父节点染成红色，兄弟节点染成黑色
情况二 父节点、兄弟节点和兄弟节点的子节点都是黑色
父节点左旋，父节点染成红色
情况三 父节点红色，兄弟节点和兄弟节点的子节点都是黑色
父节点左旋
情况四 父节点任意颜色，兄弟节点的右儿子红色，删除节点是父节点的左儿子
父节点左旋，交换父节点、兄弟节点的颜色，兄弟节点的右孩子染成黑色
情况五 父节点任意颜色，兄弟节点的左儿子红色，删除节点是父节点的左儿子
兄弟节点染成红色，兄弟节点的左儿子染成黑色，兄弟节点右旋，转换为情况四">
<meta name="author" content="xhwhis">
<link rel="canonical" href="https://xhwhis.github.io/hugo-blog/posts/rbtree/">
<link crossorigin="anonymous" href="/hugo-blog/assets/css/stylesheet.89903f5336eff9763209fb4cd1e860a14715773bf5fd93b39c714e2690162751.css" integrity="sha256-iZA/Uzbv&#43;XYyCftM0ehgoUcVdzv1/ZOznHFOJpAWJ1E=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://xhwhis.github.io/hugo-blog/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://xhwhis.github.io/hugo-blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://xhwhis.github.io/hugo-blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://xhwhis.github.io/hugo-blog/apple-touch-icon.png">
<link rel="mask-icon" href="https://xhwhis.github.io/hugo-blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="RBTree" />
<meta property="og:description" content="RedBlack_Tree 五个条件 节点非黑即红 根节点是黑色的 叶节点(NIL)是黑色的 如果一个节点是红色的，则它的两个子节点都是黑色的 从根节点出发到所有叶节点路径上，黑色节点数量相同 最短路径全黑，节点数 a，最长路径有相同多个黑色节点（条件 5）
，红色节点不能连续（条件 4），节点数 2a
调整策略 插入节点站在祖父节点看
删除调整站在父节点看
插入调整 用带有两个黑色的 NIL 的新节点替换 NIL 叶节点
为了方便调整，新结点初始为红色（黑色节点影响条件 5）
情况一 插入节点的父节点是黑色
直接插入
情况二 插入节点的父节点和叔节点都是红色
父节点、叔节点染成黑色，祖父节点染成红色
情况三 LL 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的左孩子，父节点是祖父节点的左孩子
祖父节点右旋，祖父节点染成红色，父节点染成黑色
情况四 LR 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的右孩子，父节点是祖父节点的左孩子
父节点左旋，转换为情况三（祖父节点右旋，祖父节点染成红色，父节点染成黑色）
删除调整 情况一 兄弟节点是红色
父节点左旋，父节点染成红色，兄弟节点染成黑色
情况二 父节点、兄弟节点和兄弟节点的子节点都是黑色
父节点左旋，父节点染成红色
情况三 父节点红色，兄弟节点和兄弟节点的子节点都是黑色
父节点左旋
情况四 父节点任意颜色，兄弟节点的右儿子红色，删除节点是父节点的左儿子
父节点左旋，交换父节点、兄弟节点的颜色，兄弟节点的右孩子染成黑色
情况五 父节点任意颜色，兄弟节点的左儿子红色，删除节点是父节点的左儿子
兄弟节点染成红色，兄弟节点的左儿子染成黑色，兄弟节点右旋，转换为情况四" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xhwhis.github.io/hugo-blog/posts/rbtree/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-27T22:59:11+08:00" />
<meta property="article:modified_time" content="2022-03-27T22:59:11+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="RBTree"/>
<meta name="twitter:description" content="RedBlack_Tree 五个条件 节点非黑即红 根节点是黑色的 叶节点(NIL)是黑色的 如果一个节点是红色的，则它的两个子节点都是黑色的 从根节点出发到所有叶节点路径上，黑色节点数量相同 最短路径全黑，节点数 a，最长路径有相同多个黑色节点（条件 5）
，红色节点不能连续（条件 4），节点数 2a
调整策略 插入节点站在祖父节点看
删除调整站在父节点看
插入调整 用带有两个黑色的 NIL 的新节点替换 NIL 叶节点
为了方便调整，新结点初始为红色（黑色节点影响条件 5）
情况一 插入节点的父节点是黑色
直接插入
情况二 插入节点的父节点和叔节点都是红色
父节点、叔节点染成黑色，祖父节点染成红色
情况三 LL 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的左孩子，父节点是祖父节点的左孩子
祖父节点右旋，祖父节点染成红色，父节点染成黑色
情况四 LR 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的右孩子，父节点是祖父节点的左孩子
父节点左旋，转换为情况三（祖父节点右旋，祖父节点染成红色，父节点染成黑色）
删除调整 情况一 兄弟节点是红色
父节点左旋，父节点染成红色，兄弟节点染成黑色
情况二 父节点、兄弟节点和兄弟节点的子节点都是黑色
父节点左旋，父节点染成红色
情况三 父节点红色，兄弟节点和兄弟节点的子节点都是黑色
父节点左旋
情况四 父节点任意颜色，兄弟节点的右儿子红色，删除节点是父节点的左儿子
父节点左旋，交换父节点、兄弟节点的颜色，兄弟节点的右孩子染成黑色
情况五 父节点任意颜色，兄弟节点的左儿子红色，删除节点是父节点的左儿子
兄弟节点染成红色，兄弟节点的左儿子染成黑色，兄弟节点右旋，转换为情况四"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://xhwhis.github.io/hugo-blog/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "RBTree",
      "item": "https://xhwhis.github.io/hugo-blog/posts/rbtree/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "RBTree",
  "name": "RBTree",
  "description": "RedBlack_Tree 五个条件 节点非黑即红 根节点是黑色的 叶节点(NIL)是黑色的 如果一个节点是红色的，则它的两个子节点都是黑色的 从根节点出发到所有叶节点路径上，黑色节点数量相同 最短路径全黑，节点数 a，最长路径有相同多个黑色节点（条件 5）\n，红色节点不能连续（条件 4），节点数 2a\n调整策略 插入节点站在祖父节点看\n删除调整站在父节点看\n插入调整 用带有两个黑色的 NIL 的新节点替换 NIL 叶节点\n为了方便调整，新结点初始为红色（黑色节点影响条件 5）\n情况一 插入节点的父节点是黑色\n直接插入\n情况二 插入节点的父节点和叔节点都是红色\n父节点、叔节点染成黑色，祖父节点染成红色\n情况三 LL 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的左孩子，父节点是祖父节点的左孩子\n祖父节点右旋，祖父节点染成红色，父节点染成黑色\n情况四 LR 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的右孩子，父节点是祖父节点的左孩子\n父节点左旋，转换为情况三（祖父节点右旋，祖父节点染成红色，父节点染成黑色）\n删除调整 情况一 兄弟节点是红色\n父节点左旋，父节点染成红色，兄弟节点染成黑色\n情况二 父节点、兄弟节点和兄弟节点的子节点都是黑色\n父节点左旋，父节点染成红色\n情况三 父节点红色，兄弟节点和兄弟节点的子节点都是黑色\n父节点左旋\n情况四 父节点任意颜色，兄弟节点的右儿子红色，删除节点是父节点的左儿子\n父节点左旋，交换父节点、兄弟节点的颜色，兄弟节点的右孩子染成黑色\n情况五 父节点任意颜色，兄弟节点的左儿子红色，删除节点是父节点的左儿子\n兄弟节点染成红色，兄弟节点的左儿子染成黑色，兄弟节点右旋，转换为情况四",
  "keywords": [
    
  ],
  "articleBody": "RedBlack_Tree 五个条件 节点非黑即红 根节点是黑色的 叶节点(NIL)是黑色的 如果一个节点是红色的，则它的两个子节点都是黑色的 从根节点出发到所有叶节点路径上，黑色节点数量相同 最短路径全黑，节点数 a，最长路径有相同多个黑色节点（条件 5）\n，红色节点不能连续（条件 4），节点数 2a\n调整策略 插入节点站在祖父节点看\n删除调整站在父节点看\n插入调整 用带有两个黑色的 NIL 的新节点替换 NIL 叶节点\n为了方便调整，新结点初始为红色（黑色节点影响条件 5）\n情况一 插入节点的父节点是黑色\n直接插入\n情况二 插入节点的父节点和叔节点都是红色\n父节点、叔节点染成黑色，祖父节点染成红色\n情况三 LL 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的左孩子，父节点是祖父节点的左孩子\n祖父节点右旋，祖父节点染成红色，父节点染成黑色\n情况四 LR 插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的右孩子，父节点是祖父节点的左孩子\n父节点左旋，转换为情况三（祖父节点右旋，祖父节点染成红色，父节点染成黑色）\n删除调整 情况一 兄弟节点是红色\n父节点左旋，父节点染成红色，兄弟节点染成黑色\n情况二 父节点、兄弟节点和兄弟节点的子节点都是黑色\n父节点左旋，父节点染成红色\n情况三 父节点红色，兄弟节点和兄弟节点的子节点都是黑色\n父节点左旋\n情况四 父节点任意颜色，兄弟节点的右儿子红色，删除节点是父节点的左儿子\n父节点左旋，交换父节点、兄弟节点的颜色，兄弟节点的右孩子染成黑色\n情况五 父节点任意颜色，兄弟节点的左儿子红色，删除节点是父节点的左儿子\n兄弟节点染成红色，兄弟节点的左儿子染成黑色，兄弟节点右旋，转换为情况四\n",
  "wordCount" : "54",
  "inLanguage": "en",
  "datePublished": "2022-03-27T22:59:11+08:00",
  "dateModified": "2022-03-27T22:59:11+08:00",
  "author":{
    "@type": "Person",
    "name": "xhwhis"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://xhwhis.github.io/hugo-blog/posts/rbtree/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Whis's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://xhwhis.github.io/hugo-blog/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://xhwhis.github.io/hugo-blog/" accesskey="h" title="Whis&#39;s Blog (Alt + H)">Whis&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://xhwhis.github.io/hugo-blog/">Home</a>&nbsp;»&nbsp;<a href="https://xhwhis.github.io/hugo-blog/posts/">Posts</a></div>
    <h1 class="post-title">
      RBTree<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>
    </h1>
    <div class="post-meta"><span title='2022-03-27 22:59:11 +0800 +0800'>March 27, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;54 words&nbsp;·&nbsp;xhwhis

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#redblack_tree" aria-label="RedBlack_Tree">RedBlack_Tree</a><ul>
                        
                <li>
                    <a href="#%e4%ba%94%e4%b8%aa%e6%9d%a1%e4%bb%b6" aria-label="五个条件">五个条件</a></li>
                <li>
                    <a href="#%e8%b0%83%e6%95%b4%e7%ad%96%e7%95%a5" aria-label="调整策略">调整策略</a><ul>
                        
                <li>
                    <a href="#%e6%8f%92%e5%85%a5%e8%b0%83%e6%95%b4" aria-label="插入调整">插入调整</a><ul>
                        
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e4%b8%80" aria-label="情况一">情况一</a></li>
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e4%ba%8c" aria-label="情况二">情况二</a></li>
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e4%b8%89-ll" aria-label="情况三 LL">情况三 LL</a></li>
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e5%9b%9b-lr" aria-label="情况四 LR">情况四 LR</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%88%a0%e9%99%a4%e8%b0%83%e6%95%b4" aria-label="删除调整">删除调整</a><ul>
                        
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e4%b8%80-1" aria-label="情况一">情况一</a></li>
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e4%ba%8c-1" aria-label="情况二">情况二</a></li>
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e4%b8%89" aria-label="情况三">情况三</a></li>
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e5%9b%9b" aria-label="情况四">情况四</a></li>
                <li>
                    <a href="#%e6%83%85%e5%86%b5%e4%ba%94" aria-label="情况五">情况五</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="redblack_tree">RedBlack_Tree<a hidden class="anchor" aria-hidden="true" href="#redblack_tree">#</a></h1>
<h2 id="五个条件">五个条件<a hidden class="anchor" aria-hidden="true" href="#五个条件">#</a></h2>
<ol>
<li>节点非黑即红</li>
<li>根节点是黑色的</li>
<li>叶节点(NIL)是黑色的</li>
<li>如果一个节点是红色的，则它的两个子节点都是黑色的</li>
<li>从根节点出发到所有叶节点路径上，黑色节点数量相同</li>
</ol>
<p>最短路径全黑，节点数 a，最长路径有相同多个黑色节点（条件 5）</p>
<p>，红色节点不能连续（条件 4），节点数 2a</p>
<h2 id="调整策略">调整策略<a hidden class="anchor" aria-hidden="true" href="#调整策略">#</a></h2>
<p>插入节点站在祖父节点看</p>
<p>删除调整站在父节点看</p>
<h3 id="插入调整">插入调整<a hidden class="anchor" aria-hidden="true" href="#插入调整">#</a></h3>
<p>用带有两个黑色的 NIL 的新节点替换 NIL 叶节点</p>
<p>为了方便调整，新结点初始为红色（黑色节点影响条件 5）</p>
<h4 id="情况一">情况一<a hidden class="anchor" aria-hidden="true" href="#情况一">#</a></h4>
<p>插入节点的父节点是黑色</p>
<p>直接插入</p>
<h4 id="情况二">情况二<a hidden class="anchor" aria-hidden="true" href="#情况二">#</a></h4>
<p>插入节点的父节点和叔节点都是红色</p>
<p>父节点、叔节点染成黑色，祖父节点染成红色</p>
<h4 id="情况三-ll">情况三 LL<a hidden class="anchor" aria-hidden="true" href="#情况三-ll">#</a></h4>
<p>插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的左孩子，父节点是祖父节点的左孩子</p>
<p>祖父节点右旋，祖父节点染成红色，父节点染成黑色</p>
<h4 id="情况四-lr">情况四 LR<a hidden class="anchor" aria-hidden="true" href="#情况四-lr">#</a></h4>
<p>插入节点的父节点是红色，叔节点是黑色，插入节点是父节点的右孩子，父节点是祖父节点的左孩子</p>
<p>父节点左旋，转换为情况三（祖父节点右旋，祖父节点染成红色，父节点染成黑色）</p>
<h3 id="删除调整">删除调整<a hidden class="anchor" aria-hidden="true" href="#删除调整">#</a></h3>
<h4 id="情况一-1">情况一<a hidden class="anchor" aria-hidden="true" href="#情况一-1">#</a></h4>
<p>兄弟节点是红色</p>
<p>父节点左旋，父节点染成红色，兄弟节点染成黑色</p>
<h4 id="情况二-1">情况二<a hidden class="anchor" aria-hidden="true" href="#情况二-1">#</a></h4>
<p>父节点、兄弟节点和兄弟节点的子节点都是黑色</p>
<p>父节点左旋，父节点染成红色</p>
<h4 id="情况三">情况三<a hidden class="anchor" aria-hidden="true" href="#情况三">#</a></h4>
<p>父节点红色，兄弟节点和兄弟节点的子节点都是黑色</p>
<p>父节点左旋</p>
<h4 id="情况四">情况四<a hidden class="anchor" aria-hidden="true" href="#情况四">#</a></h4>
<p>父节点任意颜色，兄弟节点的右儿子红色，删除节点是父节点的左儿子</p>
<p>父节点左旋，交换父节点、兄弟节点的颜色，兄弟节点的右孩子染成黑色</p>
<h4 id="情况五">情况五<a hidden class="anchor" aria-hidden="true" href="#情况五">#</a></h4>
<p>父节点任意颜色，兄弟节点的左儿子红色，删除节点是父节点的左儿子</p>
<p>兄弟节点染成红色，兄弟节点的左儿子染成黑色，兄弟节点右旋，转换为情况四</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://xhwhis.github.io/hugo-blog/posts/printf/">
    <span class="title">« Prev</span>
    <br>
    <span>printf</span>
  </a>
  <a class="next" href="https://xhwhis.github.io/hugo-blog/posts/socket/">
    <span class="title">Next »</span>
    <br>
    <span>socket</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://xhwhis.github.io/hugo-blog/">Whis&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
